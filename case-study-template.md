# Case-study оптимизации

## Актуальная проблема
В нашем проекте возникла серьёзная проблема.

Необходимо было обработать файл с данными, чуть больше ста двадцати мегабайт (3 млн строк).

У нас уже была программа на `ruby`, которая умела делать нужную обработку.

Она успешно работала на файлах размером пару мегабайт, но для большого файла она работала слишком долго, и не было понятно, закончит ли она вообще работу за какое-то разумное время.

Я решила исправить эту проблему, оптимизировав эту программу.

## Формирование метрики


Сначала я хотела протестировать програму с болсшим файлом, но после 10 минут ожидания
ее окончания, а не смогла дождаться и решила делать оптимизацию с файлом меньшего размера.

Чтобы найти более-менее нормалное колицчество строк, обработка которич не занимает сильно много времени,
была использована метрика с Benchmark.realtime
Я сократила файл до 98_000 строк, но ето не сильно помогло мне, так как обработка файла все равно прочодила
цлишком долго для меня.
В итоге, я сократила количество строк до 30_450, что было эквивалентно 1.1 МБ. - здесь
время обработки файла заняло 50.04 секунды. Эта метрика стала исчодной и основной тоцчкой для меня.

Для начала, я решила использовать все метрики из лекции, чтобы практиковать их применение.
В процессе оптимизации я формировала метрики с помощью:
1. Memory Gem set
2. MemoryProfiler
3.Ruby Prof
4. StackProf



## Гарантия корректности работы оптимизированной программы
Программа поставлялась с тестом.
Выполнение этого теста позволяет не допустить изменения логики программы при оптимизации.
Позже тест был переписан в формате RSpec

## Feedback-Loop
Для того, чтобы иметь возможность быстро проверять гипотезы я выстроила эффективный `feedback-loop`,
который позволил мне получать обратную связь по эффективности сделанных изменений за *время, которое у вас получилось*

Вот как я построила `feedback_loop`: *как вы построили feedback_loop*
1. Сделать изменение в коде
2. Проверить проходит ли данное изменение в коде
3. Если тест проходит, проверить улуцчшилисж ли показатели по метрикам
4. Если тест не прочодит, цм пункт 1.
5. Если показатели по метрикам приемлемы, push to GitHub

## Вникаем в детали системы, чтобы найти 20% точек роста
Для того, чтобы найти "точки роста" для оптимизации я воспользовался *инструментами, которыми вы воспользовались*

Вот какие проблемы удалось найти и решить

### Ваша находка №1
О вашей находке №1
It's hard to not be tempted to refactor code right away

### Ваша находка №2
О вашей находке №2

### Ваша находка №X
О вашей находке №X

## Результаты
В результате проделанной оптимизации наконец удалось обработать файл с данными.
Удалось улучшить метрику системы с *того, что у вас было в начале, до того, что получилось в конце*

*Какими ещё результами можете поделиться*

## Защита от регресса производительности
Для защиты от потери достигнутого прогресса при дальнейших изменениях программы сделано *то, что вы для этого сделали*
